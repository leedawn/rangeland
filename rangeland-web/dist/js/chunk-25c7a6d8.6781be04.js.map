{"version":3,"sources":["webpack:///./src/views/Reset.vue?38c5","webpack:///src/views/Reset.vue","webpack:///./src/views/Reset.vue?9a31","webpack:///./src/views/Reset.vue?b928","webpack:///./src/views/Reset.vue?44ce"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","name","_v","ref","scopedSlots","_u","key","fn","validate","errors","directives","rawName","value","expression","domProps","on","$event","target","composing","username","_s","password","passwordConfirmation","code","svg","_getCode","then","submit","staticRenderFns","components","ValidationProvider","ValidationObserver","data","errorMsg","mounted","localStorage","getItem","sid","setItem","$store","commit","methods","res","created","component"],"mappings":"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","file":"js/chunk-25c7a6d8.6781be04.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reset-wrapper\"},[_c('div',{staticClass:\"reset-content\"},[_c('div',{staticClass:\"tab\"},[_c('router-link',{staticClass:\"tab-login\",attrs:{\"to\":{name:'login'}}},[_vm._v(\"登录\")]),_c('router-link',{staticClass:\"tab-reset\",attrs:{\"to\":{name:'reset'}}},[_vm._v(\"重置密码\")]),_c('hr',{staticClass:\"selected-line\"}),_c('hr',{staticClass:\"normal-line\"})],1),_c('ValidationObserver',{ref:\"observer\",scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar validate = ref.validate;\nreturn [_c('form',{staticClass:\"ui form\",attrs:{\"method\":\"post\"}},[_c('ValidationProvider',{attrs:{\"name\":\"username\",\"rules\":\"required|email\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(\"用户名\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入用户名\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}})]),_c('div',{staticClass:\"error-message\"},[_c('p',[_vm._v(_vm._s(errors[0]))])])]}}],null,true)}),_c('ValidationProvider',{attrs:{\"name\":\"password\",\"rules\":\"required|max:16|min:6|confirmed:confirmation\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(\"密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}})]),_c('div',{staticClass:\"error-message\"},[_c('p',[_vm._v(_vm._s(errors[0]))])])]}}],null,true)}),_c('ValidationProvider',{attrs:{\"name\":\"repassword\",\"vid\":\"confirmation\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(\"确认密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.passwordConfirmation),expression:\"passwordConfirmation\"}],attrs:{\"type\":\"password\",\"placeholder\":\"请再次输入密码\"},domProps:{\"value\":(_vm.passwordConfirmation)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.passwordConfirmation=$event.target.value}}})]),_c('div',{staticClass:\"error-message\"},[_c('p',[_vm._v(_vm._s(errors[0]))])])]}}],null,true)}),_c('ValidationProvider',{ref:\"codefield\",attrs:{\"name\":\"code\",\"rules\":\"required|length:4\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(\"验证码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.code),expression:\"code\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.code=$event.target.value}}})]),_c('div',{staticClass:\"error-message extra-length\"},[_c('p',[_vm._v(_vm._s(errors[0]))])]),_c('label',{staticClass:\"code-message\",domProps:{\"innerHTML\":_vm._s(_vm.svg)},on:{\"click\":function($event){return _vm._getCode()}}},[_vm._v(_vm._s(_vm.svg))])]}}],null,true)}),_c('button',{staticClass:\"ui green button\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){validate().then(_vm.submit)}}},[_vm._v(\"提交\")])],1)]}}])})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"reset-wrapper\">\n    <div class=\"reset-content\">\n      <div class=\"tab\">\n        <router-link :to=\"{name:'login'}\" class=\"tab-login\">登录</router-link>\n        <router-link :to=\"{name:'reset'}\" class=\"tab-reset\">重置密码</router-link>\n        <hr class=\"selected-line\" />\n        <hr class=\"normal-line\" />\n      </div>\n      <ValidationObserver ref=\"observer\" v-slot=\"{ validate }\">\n        <form class=\"ui form\" method=\"post\">\n          <ValidationProvider name=\"username\" rules=\"required|email\" v-slot=\"{ errors }\">\n            <div class=\"field\">\n              <label>用户名</label>\n              <input type=\"text\" v-model=\"username\" placeholder=\"请输入用户名\" />\n            </div>\n            <div class=\"error-message\">\n              <p>{{ errors[0] }}</p>\n            </div>\n          </ValidationProvider>\n\n          <ValidationProvider\n            name=\"password\"\n            rules=\"required|max:16|min:6|confirmed:confirmation\"\n            v-slot=\"{ errors }\"\n          >\n            <div class=\"field\">\n              <label>密码</label>\n              <input type=\"password\" v-model=\"password\" placeholder=\"请输入密码\" />\n            </div>\n            <div class=\"error-message\">\n              <p>{{ errors[0] }}</p>\n            </div>\n          </ValidationProvider>\n\n          <ValidationProvider\n            name=\"repassword\"\n            vid=\"confirmation\"\n            rules=\"required\"\n            v-slot=\"{ errors }\"\n          >\n            <div class=\"field\">\n              <label>确认密码</label>\n              <input type=\"password\" v-model=\"passwordConfirmation\" placeholder=\"请再次输入密码\" />\n            </div>\n            <div class=\"error-message\">\n              <p>{{ errors[0] }}</p>\n            </div>\n          </ValidationProvider>\n\n          <ValidationProvider\n            name=\"code\"\n            ref=\"codefield\"\n            rules=\"required|length:4\"\n            v-slot=\"{ errors }\"\n          >\n            <div class=\"field\">\n              <label>验证码</label>\n              <input type=\"text\" v-model=\"code\" placeholder=\"请输入验证码\" />\n            </div>\n            <div class=\"error-message extra-length\">\n              <p>{{ errors[0] }}</p>\n            </div>\n            <label class=\"code-message\" @click=\"_getCode()\" v-html=\"svg\">{{svg}}</label>\n          </ValidationProvider>\n\n          <button type=\"button\" class=\"ui green button\" @click=\"validate().then(submit)\">提交</button>\n        </form>\n      </ValidationObserver>\n    </div>\n  </div>\n</template>\n<script>\nimport { getCode, reset } from '@/api/login'\nimport { ValidationProvider, ValidationObserver } from 'vee-validate'\nimport uuid from 'uuid/v4'\n\nexport default {\n  name: 'reset',\n  components: {\n    ValidationProvider,\n    ValidationObserver\n  },\n  data () {\n    return {\n      svg: '',\n      code: '',\n      errorMsg: [],\n      value: '',\n      username: '',\n      password: '',\n      passwordConfirmation: ''\n    }\n  },\n  mounted () {\n    let sid = ''\n    if (localStorage.getItem('sid')) {\n      sid = localStorage.getItem('sid')\n    } else {\n      sid = uuid()\n      localStorage.setItem('sid', sid)\n    }\n    this.$store.commit('setSid', sid)\n    this._getCode()\n  },\n  methods: {\n    _getCode () {\n      const sid = this.$store.state.sid\n      getCode(sid).then(res => {\n        if (res.code === 200) {\n          this.svg = res.data\n        }\n      })\n    },\n    async submit () {\n      const isValid = await this.$refs.observer.validate()\n      if (!isValid) {\n        return\n      }\n      reset({\n        username: this.username,\n        password: this.password,\n        code: this.code,\n        sid: this.$store.state.sid\n      }).then(res => {\n        if (res.code === 200) {\n          this.$store.commit('setUserInfo', res.data)\n          this.$store.commit('setIsLogin', true)\n          this.$store.commit('setToken', res.token)\n          this.username = ''\n          this.password = ''\n          this.passwordConfirmation = ''\n          this.code = ''\n          requestAnimationFrame(() => {\n            this.$refs.observer.reset()\n          })\n          this.$alert('密码重置成功')\n          setTimeout(() => {\n            this.$router.push({ name: 'index' })\n          }, 3000) // 如果时间是 1000 的话，会出现 $store.commit 来不及操作的问题\n        } else if (res.code === 401) {\n          this.$alert('验证码错误，请检查！')\n        } else if (res.code === 500) {\n          this.$alert('该邮箱未注册，请检查！')\n        }\n      })\n    }\n  },\n  created () {}\n}\n</script>\n\n<style scoped>\n.reset-wrapper {\n  position: absolute;\n  top: 60px;\n  background-color: #e6e6e6;\n  width: 100%;\n  height: 680px;\n}\n.reset-content {\n  position: absolute;\n  top: 40px;\n  left: 5%;\n  background-color: white;\n  width: 90%;\n  padding: 10px;\n  height: 550px;\n}\n.tab {\n  position: relative;\n  padding: 14px 20px;\n  color: black;\n  font-size: 17px;\n}\n.tab-login {\n  position: relative;\n  color: black;\n  left: 18px;\n}\n.tab-reset {\n  position: relative;\n  left: 63px;\n  color: #009688;\n}\n.selected-line {\n  position: absolute;\n  top: 45px;\n  left: 115px;\n  width: 70px;\n  border: 1px solid #009688;\n  z-index: 1;\n  cursor: default;\n}\n.normal-line {\n  position: relative;\n  top: 12px;\n  border: 1px solid #e6e6e6;\n}\n.field {\n  position: relative;\n  top: 40px;\n  left: 40px;\n  width: 300px;\n}\n.error-message {\n  position: absolute;\n  left: 380px;\n  color: red;\n}\n.extra-length {\n  left: 540px;\n}\n\n.extra-message {\n  position: absolute;\n  top: 75px;\n  left: 360px;\n}\n.code-message {\n  position: relative;\n  top: -20px;\n  left: 350px;\n}\n.ui.green.button {\n  position: relative;\n  top: 40px;\n  padding: 15px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reset.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reset.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Reset.vue?vue&type=template&id=17bd380d&scoped=true&\"\nimport script from \"./Reset.vue?vue&type=script&lang=js&\"\nexport * from \"./Reset.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Reset.vue?vue&type=style&index=0&id=17bd380d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17bd380d\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reset.vue?vue&type=style&index=0&id=17bd380d&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reset.vue?vue&type=style&index=0&id=17bd380d&scoped=true&lang=css&\""],"sourceRoot":""}